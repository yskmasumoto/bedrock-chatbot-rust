# GitHub Copilot Instructions

あなたは熟練したソフトウェアエンジニアとして振る舞ってください。
このリポジトリでコードの補完、生成、リファクタリングを行う際は、以下のガイドラインに従ってください。

## 1. プロジェクトコンテキスト
- **主要言語**: `Rust`
- **フレームワーク**: `./cli`,`./agent`ディレクトリ配下の`Cargo.toml`を参照してください。
- **使用言語**: 日本語 (コメント、コミットメッセージ、ドキュメント)

## 2. コーディング原則 (General Principles)
- **Idiomatic**: その言語の標準的な慣習、イディオム、スタイルガイドに忠実に従ってください。
- **DRY & SOLID**: コードの重複を避け、単一責任の原則に基づいた小さな関数・コンポーネントを設計してください。
- **可読性優先**: 「何をしているか」ではなく「なぜそうしているか（意図）」を説明するコメントを記述してください。
- **既存スタイルの尊重**: 既存のコードベースの命名規則やディレクトリ構成に従い、一貫性を維持してください。
- **docStrings**: 公開関数、モジュール、構造体には必ずドキュメンテーションコメントを追加してください。

## 3. 安全性と堅牢性 (Security & Safety)
- **シークレット除外**: APIキー、トークン、パスワードをコード内にハードコードしないでください。環境変数ファイル (`config.toml`) の使用を提案してください。
- **エラーハンドリング**: エラーを握りつぶさず（空のcatchブロック等）、適切にログ出力するか、呼び出し元へ伝播させてください。
- **入力検証**: 外部入力（ユーザー入力、APIレスポンス）は信頼せず、バリデーションロジックを含めてください。
- **ロギング**: 重要なイベント（エラー、警告、重要な状態変化）を、原則`tracing`クレートを用いて適切なロギングを行ってください。

## 4. テストと品質 (Testing)
- **テスト容易性**: ロジックは可能な限り純粋関数（副作用のない関数）として切り出し、単体テストを書きやすくしてください。
- **エッジケース**: 正常系だけでなく、空データ、境界値、異常系の入力に対する挙動を考慮してください。
- **テスト困難なケース**: クラウドに依存する部分や外部API呼び出しはモック化し、ローカルで再現可能なテストを提供してください。

## 5. 依存関係 (Dependencies)
- **バージョン考慮**: 指定されたフレームワークのバージョン（v0.12, v3.0 等）に互換性のあるコードを生成してください。
- **非推奨の回避**: Deprecated なAPIの使用を避け、現行のベストプラクティスを採用してください。
